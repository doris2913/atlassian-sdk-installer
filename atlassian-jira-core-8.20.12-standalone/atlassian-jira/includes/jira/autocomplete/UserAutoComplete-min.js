define("jira/autocomplete/user-autocomplete",["jira/autocomplete/rest-autocomplete","jira/data/parse-options-from-fieldset","jira/field/create-user-picker-popup-trigger","jira/util/browser","jira/util/elements","jira/util/objects","wrm/context-path","jquery"],function(e,t,i,r,a,o,l,n){"use strict";var s=l(),u=function(t){function i(e){var t=!1,i=e.closest("form");return i.length&&i.hasClass("submitting")&&(t=!0),t}var l=o.begetObject(e);return l.getAjaxParams=function(){return{url:s+"/rest/api/1.0/users/picker",data:{fieldName:t.fieldID,fieldConfigId:t.fieldConfigID,projectId:t.projectId},dataType:"json",type:"GET"}},l.renderSuggestions=function(e){if(i(this.field)||!r.isSelenium()&&!a.elementIsFocused(this.field))return!1;var t,o=[];return this.clearResponseContainer(),e&&e.users&&e.users.length>0&&(t=n("<ul/>").appendTo(this.responseContainer),n(e.users).each(function(){o.push([n("<li/>").html(this.html).appendTo(t),this.name])})),e.footer&&this.responseContainer.append(n("<div/>").addClass("yui-ac-ft").html(e.footer).css("display","block")),o.length>0&&(l.addSuggestionControls(o),n(".atlassian-autocomplete div.yad, .atlassian-autocomplete .labels li").textOverflow({autoUpdate:!0})),o},t.minQueryLength=2,t.queryDelay=.25,l.init(t),l};return u.init=function(e){n("fieldset.user-picker-params",e).each(function(){var r=t(n(this)),a=r.fieldId||r.fieldName,o=n("#"+a+"_container"),l=o.find(".popup-trigger");l.on("click",i.createUserPickerPopupTrigger({urlBase:s,formName:r.formName||l.closest("form").attr("name"),fieldName:r.fieldName,multiSelect:r.multiSelect,fieldConfigId:r.fieldConfigId,projectIds:r.projectId,actionToOpen:r.actionToOpen})),!0===r.userPickerEnabled&&u({field:e?e.find("#"+a):null,fieldID:a,fieldConfigID:r.fieldConfigId,projectId:r.projectId,delimChar:!1===r.multiSelect?void 0:",",ajaxData:{fieldName:r.fieldName}})})},u}),AJS.namespace("jira.widget.autocomplete.Users",null,require("jira/autocomplete/user-autocomplete")),AJS.namespace("JIRA.UserAutoComplete",null,require("jira/autocomplete/user-autocomplete"));