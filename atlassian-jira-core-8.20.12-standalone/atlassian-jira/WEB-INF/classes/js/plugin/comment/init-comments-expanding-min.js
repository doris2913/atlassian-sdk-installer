require(["jira/util/formatter","jira/util/logger","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/ajax/smart-ajax","jquery"],function(e,t,a,i,n,s,r){"use strict";r(document).on("simpleClick",".collapsed-comments",function(o){function c(e){var s=r(e).find(".activity-comment").slice(f,f+p);m.replaceWith(s),t.trace("jira.issue.comment.expanded"),a.trigger(i.NEW_CONTENT_ADDED,[d,n.panelRefreshed]),u.find(".activity-comment:first").removeClass("collapsed").addClass("expanded")}o.preventDefault();var l=r(this),m=l.closest(".message-container"),u=l.closest(".issuePanelContainer"),d=l.closest(".module"),f=m.prevAll(".activity-comment").length,p=l.data("collapsed-count");!function(){l.text(e.I18n.getText("common.concepts.loading"))}(),function(){var e=l.attr("href");s.makeRequest({url:e,method:"GET",headers:{"X-PJAX":!0}}).done(c)}()})});